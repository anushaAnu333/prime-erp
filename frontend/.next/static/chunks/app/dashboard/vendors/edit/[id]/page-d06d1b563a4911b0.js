(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[804],{21071:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});var t=s(73365);s(1521);let a=e=>{let{type:r="text",label:s,placeholder:a,value:n,onChange:l,onBlur:o,onFocus:d,error:i,success:c,disabled:u=!1,required:m=!1,readOnly:g=!1,className:x="",size:b="md",fullWidth:h=!0,icon:p,iconPosition:y="left",helperText:v,...f}=e,j=["block w-full border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 text-gray-900 placeholder-gray-500",{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-4 py-3 text-base"}[b],{default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-300 focus:border-red-500 focus:ring-red-500",success:"border-green-300 focus:border-green-500 focus:ring-green-500"}[i?"error":c?"success":"default"],u?"bg-gray-50 cursor-not-allowed text-gray-500":"bg-white",h?"w-full":"",p&&"left"===y?"pl-10":"",p&&"right"===y?"pr-10":"",x].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:"".concat(h?"w-full":""),children:[s&&(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s,m&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[p&&"left"===y&&(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("span",{className:"text-gray-400",children:p})}),(0,t.jsx)("input",{type:r,className:j,placeholder:a,value:n,onChange:l,onBlur:o,onFocus:d,disabled:u,required:m,readOnly:g,...f}),p&&"right"===y&&(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,t.jsx)("span",{className:"text-gray-400",children:p})})]}),i&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i}),c&&(0,t.jsx)("p",{className:"mt-1 text-sm text-green-600",children:c}),v&&!i&&!c&&(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:v})]})}},24834:(e,r,s)=>{"use strict";function t(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function a(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(e)}function n(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return r.filter(Boolean).join(" ")}function l(e){return({admin:"Administrator",manager:"Manager",accountant:"Accountant",agent:"Agent"})[e]||e}function o(e){return({admin:"bg-red-100 text-red-800",manager:"bg-blue-100 text-blue-800",accountant:"bg-green-100 text-green-800",agent:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800"}s.d(r,{B9:()=>t,cb:()=>l,cn:()=>n,qP:()=>o,vv:()=>a})},34467:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});var t=s(73365),a=s(24834);let n=e=>{let{children:r,className:s="",padding:n="p-6",...l}=e,o=(0,a.cn)("bg-white rounded-lg shadow-sm border border-gray-200",n,s);return(0,t.jsx)("div",{className:o,...l,children:r})};n.Header=e=>{let{children:r,className:s="",...n}=e;return(0,t.jsx)("div",{className:(0,a.cn)("border-b border-gray-200 pb-4 mb-4",s),...n,children:r})},n.Title=e=>{let{children:r,className:s="",...n}=e;return(0,t.jsx)("h3",{className:(0,a.cn)("text-lg font-semibold text-gray-900",s),...n,children:r})},n.Content=e=>{let{children:r,className:s="",...n}=e;return(0,t.jsx)("div",{className:(0,a.cn)("",s),...n,children:r})},n.Footer=e=>{let{children:r,className:s="",...n}=e;return(0,t.jsx)("div",{className:(0,a.cn)("border-t border-gray-200 pt-4 mt-4",s),...n,children:r})};let l=n},36434:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>m});var t=s(73365),a=s(1521),n=s(1702),l=s(41633),o=s(21071),d=s(57353),i=s(34467),c=s(18197),u=s.n(c);function m(){let e=(0,n.useParams)(),r=(0,n.useRouter)(),[s,c]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!0),[x,b]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[y,v]=(0,a.useState)({vendorName:"",contactPerson:"",address:"",phone:"",email:"",gstNumber:"",paymentTerms:"30 days",companyId:"PRIMA-SM"}),[f,j]=(0,a.useState)([{value:"PRIMA-SM",label:"PRIMA Sales & Marketing"},{value:"PRIMA-FT",label:"PRIMA Food Trading"},{value:"PRIMA-EX",label:"PRIMA Export"}]),[N,w]=(0,a.useState)([{value:"Cash",label:"Cash"},{value:"7 days",label:"7 days"},{value:"15 days",label:"15 days"},{value:"30 days",label:"30 days"},{value:"45 days",label:"45 days"},{value:"60 days",label:"60 days"}]);(0,a.useEffect)(()=>{A()},[e.id]);let A=async()=>{try{let r=await fetch("/api/vendors/".concat(e.id));if(r.ok){let e=await r.json();v({vendorName:e.vendor.vendorName||"",contactPerson:e.vendor.contactPerson||"",address:e.vendor.address||"",phone:e.vendor.phone||"",email:e.vendor.email||"",gstNumber:e.vendor.gstNumber||"",paymentTerms:e.vendor.paymentTerms||"30 days",companyId:e.vendor.companyId||"PRIMA-SM"})}else b("Vendor not found")}catch(e){console.error("Error fetching vendor:",e),b("Failed to fetch vendor details")}finally{g(!1)}},C=(e,r)=>{v(s=>({...s,[e]:r}))},k=async s=>{s.preventDefault(),c(!0),b(""),p("");let t=(()=>{let e=[];return y.vendorName.trim()||e.push("Vendor name is required"),y.contactPerson.trim()||e.push("Contact person is required"),y.address.trim()||e.push("Address is required"),y.phone.trim()||e.push("Phone number is required"),y.gstNumber.trim()||e.push("GST number is required"),y.gstNumber&&!/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(y.gstNumber.toUpperCase())&&e.push("Please enter a valid GST number"),y.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)&&e.push("Please enter a valid email address"),e})();if(t.length>0){b(t.join(", ")),c(!1);return}try{let s=await fetch("/api/vendors/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...y,gstNumber:y.gstNumber.toUpperCase()})});if(s.ok)p("Vendor updated successfully!"),setTimeout(()=>{r.push("/dashboard/vendors/".concat(e.id))},1500);else{let e=await s.json();b(e.message||"Failed to update vendor")}}catch(e){console.error("Error updating vendor:",e),b("Failed to update vendor")}finally{c(!1)}};return m?(0,t.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,t.jsx)(i.A,{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})})}):x&&!y.vendorName?(0,t.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,t.jsx)(i.A,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4",children:x}),(0,t.jsx)(u(),{href:"/dashboard/vendors",children:(0,t.jsx)(l.A,{variant:"outline",children:"Back to Vendors"})})]})})}):(0,t.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,t.jsxs)(i.A,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Vendor"}),(0,t.jsx)(u(),{href:"/dashboard/vendors/".concat(e.id),children:(0,t.jsx)(l.A,{variant:"outline",children:"Cancel"})})]}),x&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-600",children:x})}),h&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-green-600",children:h})}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vendor Name *"}),(0,t.jsx)(o.A,{value:y.vendorName,onChange:e=>C("vendorName",e.target.value),placeholder:"Enter vendor company name",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),(0,t.jsx)(o.A,{value:y.contactPerson,onChange:e=>C("contactPerson",e.target.value),placeholder:"Enter contact person name",required:!0})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),(0,t.jsx)(o.A,{value:y.address,onChange:e=>C("address",e.target.value),placeholder:"Enter complete address",required:!0})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,t.jsx)(o.A,{value:y.phone,onChange:e=>C("phone",e.target.value),placeholder:"Enter phone number",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email (Optional)"}),(0,t.jsx)(o.A,{type:"email",value:y.email,onChange:e=>C("email",e.target.value),placeholder:"Enter email address"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number *"}),(0,t.jsx)(o.A,{value:y.gstNumber,onChange:e=>C("gstNumber",e.target.value),placeholder:"Enter GST number",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company *"}),(0,t.jsx)(d.A,{options:f,value:y.companyId,onChange:e=>C("companyId",e),placeholder:"Select company"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms *"}),(0,t.jsx)(d.A,{options:N,value:y.paymentTerms,onChange:e=>C("paymentTerms",e),placeholder:"Select payment terms"})]})}),(0,t.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,t.jsx)(l.A,{type:"submit",disabled:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3",children:s?"Updating...":"Update Vendor"}),(0,t.jsx)(u(),{href:"/dashboard/vendors/".concat(e.id),children:(0,t.jsx)(l.A,{type:"button",variant:"secondary",className:"px-6 py-3",children:"Cancel"})})]})]})]})})}},41633:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});var t=s(73365);s(1521);var a=s(18197),n=s.n(a);let l=e=>{let{children:r,variant:s="primary",size:a="md",disabled:l=!1,loading:o=!1,href:d,onClick:i,type:c="button",className:u="",icon:m,iconPosition:g="left",fullWidth:x=!1,...b}=e,h=["inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",info:"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-gray-500",ghost:"bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-gray-500"}[s],{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[a],x?"w-full":"",u].filter(Boolean).join(" "),p=(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!o&&m&&"left"===g&&(0,t.jsx)("span",{className:"mr-2",children:m}),r,!o&&m&&"right"===g&&(0,t.jsx)("span",{className:"ml-2",children:m})]});return d?(0,t.jsx)(n(),{href:d,className:h,...b,children:p}):(0,t.jsx)("button",{type:c,className:h,disabled:l||o,onClick:i,...b,children:p})}},57353:(e,r,s)=>{"use strict";s.d(r,{A:()=>n});var t=s(73365),a=s(1521);let n=e=>{let{options:r=[],value:s,onChange:n,placeholder:l="Select an option",searchable:o=!1,loading:d=!1,disabled:i=!1,error:c=!1,onSearch:u=null,displayKey:m="label",valueKey:g="value",className:x=""}=e,[b,h]=(0,a.useState)(!1),[p,y]=(0,a.useState)(""),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{v.current&&!v.current.contains(e.target)&&(h(!1),y(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let f=o&&p?r.filter(e=>e[m].toLowerCase().includes(p.toLowerCase())):r;return(0,t.jsxs)("div",{className:"relative ".concat(x),ref:v,children:[(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),!i&&(h(!b),b||y(""))},disabled:i,className:"\n          w-full px-3 py-2.5 text-left border rounded-lg shadow-sm bg-white text-gray-900\n          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\n          disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed\n          ".concat(c?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300","\n          ").concat(b?"ring-2 ring-blue-500 border-blue-500":"","\n        "),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"".concat(s?"text-gray-900":"text-gray-500"," truncate text-sm flex-1 min-w-0"),children:(()=>{let e=r.find(e=>e[g]===s);return e?e[m]:l})()}),(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform ".concat(b?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),b&&(0,t.jsxs)("div",{className:"absolute z-[9999] w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[o&&(0,t.jsx)("div",{className:"p-2 border-b border-gray-200",children:(0,t.jsx)("input",{type:"text",value:p,onChange:e=>{let r=e.target.value;y(r),u&&u(r)},placeholder:"Search...",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded bg-white text-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0})}),(0,t.jsx)("div",{className:"max-h-48 overflow-y-auto",children:d?(0,t.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading..."}):0===f.length?(0,t.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:p?"No options found":"No options available"}):f.map((e,r)=>(0,t.jsx)("button",{type:"button",onClick:r=>((e,r)=>{r.preventDefault(),r.stopPropagation(),n&&"function"==typeof n&&n(e[g]),h(!1),y("")})(e,r),className:"\n                    w-full px-3 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none cursor-pointer\n                    ".concat(e[g]===s?"bg-blue-50 text-blue-900":"text-gray-900","\n                  "),children:e[m]},e[g]||r))})]})]})}},70068:(e,r,s)=>{Promise.resolve().then(s.bind(s,36434))}},e=>{e.O(0,[96,358],()=>e(e.s=70068)),_N_E=e.O()}]);