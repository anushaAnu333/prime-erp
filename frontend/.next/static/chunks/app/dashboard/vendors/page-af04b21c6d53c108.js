(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[729],{21071:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(73365);t(1521);let a=e=>{let{type:r="text",label:t,placeholder:a,value:n,onChange:o,onBlur:l,onFocus:c,error:d,success:i,disabled:u=!1,required:x=!1,readOnly:m=!1,className:h="",size:g="md",fullWidth:f=!0,icon:b,iconPosition:p="left",helperText:y,...v}=e,j=["block w-full border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 text-gray-900 placeholder-gray-500",{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-4 py-3 text-base"}[g],{default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-300 focus:border-red-500 focus:ring-red-500",success:"border-green-300 focus:border-green-500 focus:ring-green-500"}[d?"error":i?"success":"default"],u?"bg-gray-50 cursor-not-allowed text-gray-500":"bg-white",f?"w-full":"",b&&"left"===p?"pl-10":"",b&&"right"===p?"pr-10":"",h].filter(Boolean).join(" ");return(0,s.jsxs)("div",{className:"".concat(f?"w-full":""),children:[t&&(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t,x&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[b&&"left"===p&&(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("span",{className:"text-gray-400",children:b})}),(0,s.jsx)("input",{type:r,className:j,placeholder:a,value:n,onChange:o,onBlur:l,onFocus:c,disabled:u,required:x,readOnly:m,...v}),b&&"right"===p&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsx)("span",{className:"text-gray-400",children:b})})]}),d&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d}),i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-green-600",children:i}),y&&!d&&!i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:y})]})}},54903:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var s=t(73365),a=t(1521),n=t(41633),o=t(21071),l=t(57353),c=t(34467),d=t(85299),i=t(18197),u=t.n(i);function x(){let[e,r]=(0,a.useState)([]),[t,i]=(0,a.useState)([{value:"",label:"All Companies"},{value:"PRIMA-SM",label:"PRIMA Sales & Marketing"},{value:"PRIMA-FT",label:"PRIMA Food Trading"},{value:"PRIMA-EX",label:"PRIMA Export"}]),[x,m]=(0,a.useState)({company:"",search:""}),[h,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f()},[x]);let f=async()=>{g(!0);try{let e=new URLSearchParams({...x.company&&{company:x.company},...x.search&&{search:x.search}}),t=await fetch("/api/vendors?".concat(e));if(t.ok){let e=await t.json();r(e.vendors||[])}}catch(e){console.error("Error fetching vendors:",e)}finally{g(!1)}},b=(e,r)=>{m(t=>({...t,[e]:r}))},p=[{key:"vendorCode",header:"Vendor Code",render:e=>(0,s.jsx)("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:e})},{key:"vendorName",header:"Vendor Name"},{key:"contactPerson",header:"Contact Person"},{key:"phone",header:"Phone"},{key:"currentBalance",header:"Balance",render:e=>(0,s.jsx)("span",{className:e>0?"text-red-600 font-semibold":"text-green-600 font-semibold",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)})},{key:"companyId",header:"Company"},{key:"actions",header:"Actions",render:(e,r)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(u(),{href:"/dashboard/vendors/".concat(r._id),children:(0,s.jsx)(n.A,{size:"sm",variant:"outline",children:"View"})}),(0,s.jsx)(u(),{href:"/dashboard/vendors/edit/".concat(r._id),children:(0,s.jsx)(n.A,{size:"sm",variant:"outline",children:"Edit"})})]})}];return(0,s.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,s.jsxs)(c.A,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Vendors"}),(0,s.jsx)(u(),{href:"/dashboard/vendors/create",children:(0,s.jsx)(n.A,{className:"bg-blue-600 hover:bg-blue-700",children:"Add New Vendor"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsx)(o.A,{placeholder:"Search vendors...",value:x.search,onChange:e=>b("search",e.target.value)}),(0,s.jsx)(l.A,{placeholder:"Select Company",options:t,value:x.company,onChange:e=>b("company",e)})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)(d.A,{data:e,columns:p,loading:h,emptyMessage:"No vendors found"})})]})})}},57353:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(73365),a=t(1521);let n=e=>{let{options:r=[],value:t,onChange:n,placeholder:o="Select an option",searchable:l=!1,loading:c=!1,disabled:d=!1,error:i=!1,onSearch:u=null,displayKey:x="label",valueKey:m="value",className:h=""}=e,[g,f]=(0,a.useState)(!1),[b,p]=(0,a.useState)(""),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&(f(!1),p(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let v=l&&b?r.filter(e=>e[x].toLowerCase().includes(b.toLowerCase())):r;return(0,s.jsxs)("div",{className:"relative ".concat(h),ref:y,children:[(0,s.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),!d&&(f(!g),g||p(""))},disabled:d,className:"\n          w-full px-3 py-2.5 text-left border rounded-lg shadow-sm bg-white text-gray-900\n          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\n          disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed\n          ".concat(i?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300","\n          ").concat(g?"ring-2 ring-blue-500 border-blue-500":"","\n        "),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"".concat(t?"text-gray-900":"text-gray-500"," truncate text-sm flex-1 min-w-0"),children:(()=>{let e=r.find(e=>e[m]===t);return e?e[x]:o})()}),(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform ".concat(g?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),g&&(0,s.jsxs)("div",{className:"absolute z-[9999] w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[l&&(0,s.jsx)("div",{className:"p-2 border-b border-gray-200",children:(0,s.jsx)("input",{type:"text",value:b,onChange:e=>{let r=e.target.value;p(r),u&&u(r)},placeholder:"Search...",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded bg-white text-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0})}),(0,s.jsx)("div",{className:"max-h-48 overflow-y-auto",children:c?(0,s.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading..."}):0===v.length?(0,s.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:b?"No options found":"No options available"}):v.map((e,r)=>(0,s.jsx)("button",{type:"button",onClick:r=>((e,r)=>{r.preventDefault(),r.stopPropagation(),n&&"function"==typeof n&&n(e[m]),f(!1),p("")})(e,r),className:"\n                    w-full px-3 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none cursor-pointer\n                    ".concat(e[m]===t?"bg-blue-50 text-blue-900":"text-gray-900","\n                  "),children:e[x]},e[m]||r))})]})]})}},59589:(e,r,t)=>{Promise.resolve().then(t.bind(t,54903))}},e=>{e.O(0,[96,29,358],()=>e(e.s=59589)),_N_E=e.O()}]);