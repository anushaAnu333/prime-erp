(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[661],{21071:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(73365);r(1521);let s=e=>{let{type:t="text",label:r,placeholder:s,value:n,onChange:l,onBlur:o,onFocus:c,error:i,success:d,disabled:u=!1,required:m=!1,readOnly:x=!1,className:g="",size:b="md",fullWidth:p=!0,icon:h,iconPosition:y="left",helperText:f,...v}=e,j=["block w-full border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 text-gray-900 placeholder-gray-500",{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-4 py-3 text-base"}[b],{default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-300 focus:border-red-500 focus:ring-red-500",success:"border-green-300 focus:border-green-500 focus:ring-green-500"}[i?"error":d?"success":"default"],u?"bg-gray-50 cursor-not-allowed text-gray-500":"bg-white",p?"w-full":"",h&&"left"===y?"pl-10":"",h&&"right"===y?"pr-10":"",g].filter(Boolean).join(" ");return(0,a.jsxs)("div",{className:"".concat(p?"w-full":""),children:[r&&(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r,m&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[h&&"left"===y&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-400",children:h})}),(0,a.jsx)("input",{type:t,className:j,placeholder:s,value:n,onChange:l,onBlur:o,onFocus:c,disabled:u,required:m,readOnly:x,...v}),h&&"right"===y&&(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-400",children:h})})]}),i&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i}),d&&(0,a.jsx)("p",{className:"mt-1 text-sm text-green-600",children:d}),f&&!i&&!d&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:f})]})}},24834:(e,t,r)=>{"use strict";function a(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function s(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(e)}function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function l(e){return({admin:"Administrator",manager:"Manager",accountant:"Accountant",agent:"Agent"})[e]||e}function o(e){return({admin:"bg-red-100 text-red-800",manager:"bg-blue-100 text-blue-800",accountant:"bg-green-100 text-green-800",agent:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800"}r.d(t,{B9:()=>a,cb:()=>l,cn:()=>n,qP:()=>o,vv:()=>s})},34467:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(73365),s=r(24834);let n=e=>{let{children:t,className:r="",padding:n="p-6",...l}=e,o=(0,s.cn)("bg-white rounded-lg shadow-sm border border-gray-200",n,r);return(0,a.jsx)("div",{className:o,...l,children:t})};n.Header=e=>{let{children:t,className:r="",...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)("border-b border-gray-200 pb-4 mb-4",r),...n,children:t})},n.Title=e=>{let{children:t,className:r="",...n}=e;return(0,a.jsx)("h3",{className:(0,s.cn)("text-lg font-semibold text-gray-900",r),...n,children:t})},n.Content=e=>{let{children:t,className:r="",...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)("",r),...n,children:t})},n.Footer=e=>{let{children:t,className:r="",...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)("border-t border-gray-200 pt-4 mt-4",r),...n,children:t})};let l=n},34679:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(73365),s=r(1521),n=r(1702),l=r(34467),o=r(41633),c=r(21071),i=r(57353);function d(){let e=(0,n.useRouter)(),[t,r]=(0,s.useState)(!1),[d,u]=(0,s.useState)(""),[m,x]=(0,s.useState)({product:"",companyId:"",openingStock:"",unit:"",expiryDate:"",minimumStock:""}),g=(e,t)=>{x(r=>({...r,[e]:t}))},b=async t=>{if(t.preventDefault(),u(""),m.product?m.companyId?!m.openingStock||m.openingStock<=0?(u("Opening stock must be greater than 0"),!1):m.unit?m.expiryDate?!!m.minimumStock&&!(m.minimumStock<0)||(u("Minimum stock must be 0 or greater"),!1):(u("Please select an expiry date"),!1):(u("Please select a unit"),!1):(u("Please select a company"),!1):(u("Please select a product"),!1)){r(!0);try{let t=await fetch("/api/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product:m.product,companyId:m.companyId,openingStock:parseInt(m.openingStock),unit:m.unit,expiryDate:m.expiryDate,minimumStock:parseInt(m.minimumStock)||10})});if(t.ok)await t.json(),alert("Stock created successfully!"),e.push("/dashboard/stock");else{let e=await t.json();u(e.message||"Failed to create stock")}}catch(e){console.error("Error creating stock:",e),u("Failed to create stock")}finally{r(!1)}}};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Add New Stock"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create a new stock entry for product inventory tracking"})]}),(0,a.jsx)(l.A,{className:"p-6",children:(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[d&&(0,a.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:d}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),(0,a.jsx)(i.A,{options:[{value:"dosa",label:"Dosa"},{value:"idli",label:"Idli"},{value:"chapati",label:"Chapati"},{value:"parata",label:"Parata"},{value:"paneer",label:"Paneer"},{value:"green peas",label:"Green Peas"}],value:m.product,onChange:e=>g("product",e),placeholder:"Select a product"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company *"}),(0,a.jsx)(i.A,{options:[{value:"PRIMA-SM",label:"PRIMA Sales & Marketing"},{value:"PRIMA-FT",label:"PRIMA Foodtech"},{value:"PRIMA-EX",label:"PRIMA Export"}],value:m.companyId,onChange:e=>g("companyId",e),placeholder:"Select a company"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opening Stock *"}),(0,a.jsx)(c.A,{type:"number",min:"0",value:m.openingStock,onChange:e=>g("openingStock",e.target.value),placeholder:"Enter opening stock quantity"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Initial stock quantity available"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit *"}),(0,a.jsx)(i.A,{options:[{value:"packets",label:"Packets"},{value:"packs",label:"Packs"},{value:"kg",label:"Kilograms (kg)"}],value:m.unit,onChange:e=>g("unit",e),placeholder:"Select unit of measurement"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),(0,a.jsx)(c.A,{type:"date",value:m.expiryDate,onChange:e=>g("expiryDate",e.target.value),min:new Date().toISOString().split("T")[0]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Date when the product expires"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock Level"}),(0,a.jsx)(c.A,{type:"number",min:"0",value:m.minimumStock,onChange:e=>g("minimumStock",e.target.value),placeholder:"Enter minimum stock level (default: 10)"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Alert will be triggered when stock falls below this level"})]}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Stock Formula Preview"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,a.jsx)("p",{children:"Opening Stock + Purchases - Sales = Closing Stock"}),(0,a.jsxs)("p",{className:"mt-1",children:[m.openingStock||0," + 0 - 0 ="," ",m.openingStock||0," ",m.unit]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)(o.A,{type:"submit",disabled:t,className:"flex-1",children:t?"Creating...":"Create Stock"}),(0,a.jsx)(o.A,{type:"button",variant:"outline",onClick:()=>{e.push("/dashboard/stock")},children:"Cancel"})]})]})})]})}},41633:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(73365);r(1521);var s=r(18197),n=r.n(s);let l=e=>{let{children:t,variant:r="primary",size:s="md",disabled:l=!1,loading:o=!1,href:c,onClick:i,type:d="button",className:u="",icon:m,iconPosition:x="left",fullWidth:g=!1,...b}=e,p=["inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",info:"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-gray-500",ghost:"bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-gray-500"}[r],{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[s],g?"w-full":"",u].filter(Boolean).join(" "),h=(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!o&&m&&"left"===x&&(0,a.jsx)("span",{className:"mr-2",children:m}),t,!o&&m&&"right"===x&&(0,a.jsx)("span",{className:"ml-2",children:m})]});return c?(0,a.jsx)(n(),{href:c,className:p,...b,children:h}):(0,a.jsx)("button",{type:d,className:p,disabled:l||o,onClick:i,...b,children:h})}},56011:(e,t,r)=>{Promise.resolve().then(r.bind(r,34679))},57353:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(73365),s=r(1521);let n=e=>{let{options:t=[],value:r,onChange:n,placeholder:l="Select an option",searchable:o=!1,loading:c=!1,disabled:i=!1,error:d=!1,onSearch:u=null,displayKey:m="label",valueKey:x="value",className:g=""}=e,[b,p]=(0,s.useState)(!1),[h,y]=(0,s.useState)(""),f=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&(p(!1),y(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let v=o&&h?t.filter(e=>e[m].toLowerCase().includes(h.toLowerCase())):t;return(0,a.jsxs)("div",{className:"relative ".concat(g),ref:f,children:[(0,a.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),!i&&(p(!b),b||y(""))},disabled:i,className:"\n          w-full px-3 py-2.5 text-left border rounded-lg shadow-sm bg-white text-gray-900\n          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\n          disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed\n          ".concat(d?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300","\n          ").concat(b?"ring-2 ring-blue-500 border-blue-500":"","\n        "),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"".concat(r?"text-gray-900":"text-gray-500"," truncate text-sm flex-1 min-w-0"),children:(()=>{let e=t.find(e=>e[x]===r);return e?e[m]:l})()}),(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform ".concat(b?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),b&&(0,a.jsxs)("div",{className:"absolute z-[9999] w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[o&&(0,a.jsx)("div",{className:"p-2 border-b border-gray-200",children:(0,a.jsx)("input",{type:"text",value:h,onChange:e=>{let t=e.target.value;y(t),u&&u(t)},placeholder:"Search...",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded bg-white text-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0})}),(0,a.jsx)("div",{className:"max-h-48 overflow-y-auto",children:c?(0,a.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading..."}):0===v.length?(0,a.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:h?"No options found":"No options available"}):v.map((e,t)=>(0,a.jsx)("button",{type:"button",onClick:t=>((e,t)=>{t.preventDefault(),t.stopPropagation(),n&&"function"==typeof n&&n(e[x]),p(!1),y("")})(e,t),className:"\n                    w-full px-3 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none cursor-pointer\n                    ".concat(e[x]===r?"bg-blue-50 text-blue-900":"text-gray-900","\n                  "),children:e[m]},e[x]||t))})]})]})}}},e=>{e.O(0,[96,358],()=>e(e.s=56011)),_N_E=e.O()}]);