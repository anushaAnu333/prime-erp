(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{12134:(e,t,r)=>{Promise.resolve().then(r.bind(r,18841))},18841:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var a=r(73365),s=r(1521),l=r(1702),n=r(41633),c=r(21071),i=r(24834),o=r(38623),d=r(91775);let u=()=>{let e=(0,l.useRouter)(),t=(0,o.jL)(),{loading:r,error:u}=(0,o.As)(),[h,g]=(0,s.useState)({email:"",password:"",rememberMe:!1}),[m,p]=(0,s.useState)({}),y=e=>{let{name:t,value:r,type:a,checked:s}=e.target;g(e=>({...e,[t]:"checkbox"===a?s:r})),m[t]&&p(e=>({...e,[t]:""}))},x=async r=>{if(r.preventDefault(),(()=>{let e={};return h.email?(0,i.B9)(h.email)||(e.email="Please enter a valid email address"):e.email="Email is required",h.password?h.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",p(e),0===Object.keys(e).length})())try{await t((0,d.Lx)({email:h.email,password:h.password,rememberMe:h.rememberMe})).unwrap(),e.push("/dashboard"),e.refresh()}catch(e){console.error("Login failed:",e)}};return(0,a.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:u})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,a.jsx)(c.A,{type:"email",name:"email",value:h.email,onChange:y,placeholder:"Enter your email",error:m.email}),m.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,a.jsx)(c.A,{type:"password",name:"password",value:h.password,onChange:y,placeholder:"Enter your password",error:m.password}),m.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.password})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"rememberMe",checked:h.rememberMe,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]})}),(0,a.jsx)(n.A,{type:"submit",className:"w-full",loading:r,disabled:r,children:"Sign In"})]})})}},21071:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(73365);r(1521);let s=e=>{let{type:t="text",label:r,placeholder:s,value:l,onChange:n,onBlur:c,onFocus:i,error:o,success:d,disabled:u=!1,required:h=!1,readOnly:g=!1,className:m="",size:p="md",fullWidth:y=!0,icon:x,iconPosition:b="left",helperText:f,...C}=e,w=["block w-full border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 text-gray-900 placeholder-gray-500",{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-4 py-3 text-base"}[p],{default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-300 focus:border-red-500 focus:ring-red-500",success:"border-green-300 focus:border-green-500 focus:ring-green-500"}[o?"error":d?"success":"default"],u?"bg-gray-50 cursor-not-allowed text-gray-500":"bg-white",y?"w-full":"",x&&"left"===b?"pl-10":"",x&&"right"===b?"pr-10":"",m].filter(Boolean).join(" ");return(0,a.jsxs)("div",{className:"".concat(y?"w-full":""),children:[r&&(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r,h&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[x&&"left"===b&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-400",children:x})}),(0,a.jsx)("input",{type:t,className:w,placeholder:s,value:l,onChange:n,onBlur:c,onFocus:i,disabled:u,required:h,readOnly:g,...C}),x&&"right"===b&&(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-400",children:x})})]}),o&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o}),d&&(0,a.jsx)("p",{className:"mt-1 text-sm text-green-600",children:d}),f&&!o&&!d&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:f})]})}},24834:(e,t,r)=>{"use strict";function a(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function s(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(e)}function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function n(e){return({admin:"Administrator",manager:"Manager",accountant:"Accountant",agent:"Agent"})[e]||e}function c(e){return({admin:"bg-red-100 text-red-800",manager:"bg-blue-100 text-blue-800",accountant:"bg-green-100 text-green-800",agent:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800"}r.d(t,{B9:()=>a,cb:()=>n,cn:()=>l,qP:()=>c,vv:()=>s})},37170:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let a="http://localhost:3001",s={LOGIN:"".concat(a,"/api/auth/login"),LOGOUT:"".concat(a,"/api/auth/logout"),ME:"".concat(a,"/api/auth/me"),SALES:"".concat(a,"/api/sales"),SALE_BY_ID:e=>"".concat(a,"/api/sales/").concat(e),CUSTOMERS:"".concat(a,"/api/customers"),CUSTOMER_BY_ID:e=>"".concat(a,"/api/customers/").concat(e),PRODUCTS:"".concat(a,"/api/products"),PRODUCT_BY_ID:e=>"".concat(a,"/api/products/").concat(e),DASHBOARD:"".concat(a,"/api/dashboard"),DASHBOARD_STATS:"".concat(a,"/api/dashboard/stats")};class l{getCachedData(e){let t=this.cache.get(e);return t&&Date.now()-t.timestamp<3e5?t.data:null}setCachedData(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}clearCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.cache.delete(e):this.cache.clear()}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={credentials:"include",headers:{"Content-Type":"application/json"}},a={...r,...t,headers:{...r.headers,...t.headers}};try{let t=await fetch(e,a);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(e){throw console.error("API request failed:",e),e}}async get(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t){let t=this.getCachedData(e);if(t)return t}let r=await this.request(e);return t&&this.setCachedData(e,r),r}async post(e,t){return this.request(e,{method:"POST",body:JSON.stringify(t)})}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}async login(e){let t=await this.post(s.LOGIN,e);return this.clearCache(),t}async logout(){let e=await this.post(s.LOGOUT);return this.clearCache(),e}async getCurrentUser(){return this.get(s.ME,!1)}async getSales(){return this.get(s.SALES)}async getSale(e){return this.get(s.SALE_BY_ID(e))}async createSale(e){let t=await this.post(s.SALES,e);return this.clearCache(s.SALES),t}async updateSale(e,t){let r=await this.put(s.SALE_BY_ID(e),t);return this.clearCache(s.SALES),this.clearCache(s.SALE_BY_ID(e)),r}async deleteSale(e){let t=await this.delete(s.SALE_BY_ID(e));return this.clearCache(s.SALES),this.clearCache(s.SALE_BY_ID(e)),t}async getCustomers(){return this.get(s.CUSTOMERS)}async getCustomer(e){return this.get(s.CUSTOMER_BY_ID(e))}async createCustomer(e){let t=await this.post(s.CUSTOMERS,e);return this.clearCache(s.CUSTOMERS),t}async updateCustomer(e,t){let r=await this.put(s.CUSTOMER_BY_ID(e),t);return this.clearCache(s.CUSTOMERS),this.clearCache(s.CUSTOMER_BY_ID(e)),r}async deleteCustomer(e){let t=await this.delete(s.CUSTOMER_BY_ID(e));return this.clearCache(s.CUSTOMERS),this.clearCache(s.CUSTOMER_BY_ID(e)),t}async getProducts(){return this.get(s.PRODUCTS)}async getProduct(e){return this.get(s.PRODUCT_BY_ID(e))}async createProduct(e){let t=await this.post(s.PRODUCTS,e);return this.clearCache(s.PRODUCTS),t}async updateProduct(e,t){let r=await this.put(s.PRODUCT_BY_ID(e),t);return this.clearCache(s.PRODUCTS),this.clearCache(s.PRODUCT_BY_ID(e)),r}async deleteProduct(e){let t=await this.delete(s.PRODUCT_BY_ID(e));return this.clearCache(s.PRODUCTS),this.clearCache(s.PRODUCT_BY_ID(e)),t}async getDashboardStats(){return this.get(s.DASHBOARD_STATS)}async getDashboard(){return this.get(s.DASHBOARD)}constructor(){this.baseURL="http://localhost:3001",this.cache=new Map}}let n=new l},38623:(e,t,r)=>{"use strict";r.d(t,{As:()=>n,e6:()=>c,jL:()=>s});var a=r(29183);let s=()=>(0,a.wA)(),l=a.d4,n=()=>l(e=>e.auth),c=()=>l(e=>e.dashboard.data)},41633:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(73365);r(1521);var s=r(18197),l=r.n(s);let n=e=>{let{children:t,variant:r="primary",size:s="md",disabled:n=!1,loading:c=!1,href:i,onClick:o,type:d="button",className:u="",icon:h,iconPosition:g="left",fullWidth:m=!1,...p}=e,y=["inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",info:"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-gray-500",ghost:"bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-gray-500"}[r],{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[s],m?"w-full":"",u].filter(Boolean).join(" "),x=(0,a.jsxs)(a.Fragment,{children:[c&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!c&&h&&"left"===g&&(0,a.jsx)("span",{className:"mr-2",children:h}),t,!c&&h&&"right"===g&&(0,a.jsx)("span",{className:"ml-2",children:h})]});return i?(0,a.jsx)(l(),{href:i,className:y,...p,children:x}):(0,a.jsx)("button",{type:d,className:y,disabled:n||c,onClick:o,...p,children:x})}},91775:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,HW:()=>c,Lx:()=>l});var a=r(28276),s=r(37170);let l=(0,a.zD)("auth/login",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.A.login(e)}catch(e){return r(e.message)}}),n=(0,a.zD)("auth/logout",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.A.logout()}catch(e){return r(e.message)}}),c=(0,a.zD)("auth/getCurrentUser",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.A.getCurrentUser()}catch(e){return r(e.message)}}),i=(0,a.Z0)({name:"auth",initialState:{user:null,isAuthenticated:!1,loading:!1,error:null},reducers:{clearError:e=>{e.error=null},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!!t.payload}},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user,e.isAuthenticated=!0,e.error=null}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload,e.user=null,e.isAuthenticated=!1}).addCase(n.pending,e=>{e.loading=!0}).addCase(n.fulfilled,e=>{e.loading=!1,e.user=null,e.isAuthenticated=!1,e.error=null}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(c.pending,e=>{e.loading=!0}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user,e.isAuthenticated=!0,e.error=null}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.user=null,e.isAuthenticated=!1,e.error=t.payload})}}),{clearError:o,setUser:d}=i.actions,u=i.reducer}},e=>{e.O(0,[96,358],()=>e(e.s=12134)),_N_E=e.O()}]);