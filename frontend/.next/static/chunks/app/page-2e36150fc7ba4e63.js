(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{34191:(t,e,a)=>{"use strict";a.d(e,{HW:()=>s});var r=a(37170);async function s(){try{return(await r.A.getCurrentUser()).user}catch(t){return console.error("Error getting current user:",t),null}}},37170:(t,e,a)=>{"use strict";a.d(e,{A:()=>n});let r="http://localhost:3001",s={LOGIN:"".concat(r,"/api/auth/login"),LOGOUT:"".concat(r,"/api/auth/logout"),ME:"".concat(r,"/api/auth/me"),SALES:"".concat(r,"/api/sales"),SALE_BY_ID:t=>"".concat(r,"/api/sales/").concat(t),CUSTOMERS:"".concat(r,"/api/customers"),CUSTOMER_BY_ID:t=>"".concat(r,"/api/customers/").concat(t),PRODUCTS:"".concat(r,"/api/products"),PRODUCT_BY_ID:t=>"".concat(r,"/api/products/").concat(t),DASHBOARD:"".concat(r,"/api/dashboard"),DASHBOARD_STATS:"".concat(r,"/api/dashboard/stats")};class c{getCachedData(t){let e=this.cache.get(t);return e&&Date.now()-e.timestamp<3e5?e.data:null}setCachedData(t,e){this.cache.set(t,{data:e,timestamp:Date.now()})}clearCache(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?this.cache.delete(t):this.cache.clear()}async request(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={credentials:"include",headers:{"Content-Type":"application/json"}},r={...a,...e,headers:{...a.headers,...e.headers}};try{let e=await fetch(t,r);if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(t){throw console.error("API request failed:",t),t}}async get(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e){let e=this.getCachedData(t);if(e)return e}let a=await this.request(t);return e&&this.setCachedData(t,a),a}async post(t,e){return this.request(t,{method:"POST",body:JSON.stringify(e)})}async put(t,e){return this.request(t,{method:"PUT",body:JSON.stringify(e)})}async delete(t){return this.request(t,{method:"DELETE"})}async login(t){let e=await this.post(s.LOGIN,t);return this.clearCache(),e}async logout(){let t=await this.post(s.LOGOUT);return this.clearCache(),t}async getCurrentUser(){return this.get(s.ME,!1)}async getSales(){return this.get(s.SALES)}async getSale(t){return this.get(s.SALE_BY_ID(t))}async createSale(t){let e=await this.post(s.SALES,t);return this.clearCache(s.SALES),e}async updateSale(t,e){let a=await this.put(s.SALE_BY_ID(t),e);return this.clearCache(s.SALES),this.clearCache(s.SALE_BY_ID(t)),a}async deleteSale(t){let e=await this.delete(s.SALE_BY_ID(t));return this.clearCache(s.SALES),this.clearCache(s.SALE_BY_ID(t)),e}async getCustomers(){return this.get(s.CUSTOMERS)}async getCustomer(t){return this.get(s.CUSTOMER_BY_ID(t))}async createCustomer(t){let e=await this.post(s.CUSTOMERS,t);return this.clearCache(s.CUSTOMERS),e}async updateCustomer(t,e){let a=await this.put(s.CUSTOMER_BY_ID(t),e);return this.clearCache(s.CUSTOMERS),this.clearCache(s.CUSTOMER_BY_ID(t)),a}async deleteCustomer(t){let e=await this.delete(s.CUSTOMER_BY_ID(t));return this.clearCache(s.CUSTOMERS),this.clearCache(s.CUSTOMER_BY_ID(t)),e}async getProducts(){return this.get(s.PRODUCTS)}async getProduct(t){return this.get(s.PRODUCT_BY_ID(t))}async createProduct(t){let e=await this.post(s.PRODUCTS,t);return this.clearCache(s.PRODUCTS),e}async updateProduct(t,e){let a=await this.put(s.PRODUCT_BY_ID(t),e);return this.clearCache(s.PRODUCTS),this.clearCache(s.PRODUCT_BY_ID(t)),a}async deleteProduct(t){let e=await this.delete(s.PRODUCT_BY_ID(t));return this.clearCache(s.PRODUCTS),this.clearCache(s.PRODUCT_BY_ID(t)),e}async getDashboardStats(){return this.get(s.DASHBOARD_STATS)}async getDashboard(){return this.get(s.DASHBOARD)}constructor(){this.baseURL="http://localhost:3001",this.cache=new Map}}let n=new c},64344:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var r=a(73365),s=a(1521),c=a(1702),n=a(34191);function i(){let t=(0,c.useRouter)(),[e,a]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{await (0,n.HW)()?t.push("/dashboard"):t.push("/login")}catch(e){console.error("Auth check failed:",e),t.push("/login")}finally{a(!1)}})()},[t]),e)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):null}},69580:(t,e,a)=>{Promise.resolve().then(a.bind(a,64344))}},t=>{t.O(0,[96,358],()=>t(t.s=69580)),_N_E=t.O()}]);